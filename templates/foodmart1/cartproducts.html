{% extends 'foodmart1/main2.html' %}

{% block title %}Products{% endblock %}

{% block css %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Parastoo:wght@400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/foodmart1/carts.css') }}">

{% endblock %}

{% block content %}


    <div class="cart-main">

        <div class="cart-container">
            <div class="cart-products" id="cartProducts">
                <h2>Shopping Cart</h2>
                {% if products %}
                    <!-- Example Product Rows -->
                    {% for item in products %}
                        <form action="/cart" method="Post">
                            <div class="cart-row">
                                <span>{{ item[0].name }}</span>
                                <input type="hidden" name="id" value="{{ item[0].id }}">
                                <input type="hidden" name="amount" value="{{ item[1] }}">
                                <div class="quantity-controls">

                                    <button class="decrease" name="remove1" id="remove1" value="remove1">-</button>
                                    <span class="quantity">{{ item[1] }}</span>
                                    <button class="increase" name="add1" id="add1" value="add1" type="submit">+</button>
                                </div>
                                <span class="subtotal">{{ item[0].price * item[1] }}$</span>
                                <button class="remove-btn" name="remove" id="remove" value="remove">Remove</button>
                            </div>
                        </form>
                    {% endfor %}
                {% endif %}
            </div>

            <aside class="cart-summary">
                <h2>Summary</h2>
                <div class="line">
                    <span>ITEMS <span id="itemCount">{{ amount_of_P }}</span></span>
                    <span id="itemsTotal">{{ totall_price }}$</span>
                </div>

                <div>
                    <span>SHIPPING</span>
                    <select id="shipping">
                        <option value="5">Standard Delivery - €5.00</option>
                        <option value="10">Express Delivery - €10.00</option>
                    </select>
                </div>

                <div>
                    <span>GIVE CODE</span>
                    <input type="text" id="discount" placeholder="Enter your code">
                </div>

                <hr>

                <div class="line">
                    <strong>TOTAL PRICE</strong>
                    <strong id="total">{{ totall_price }}$</strong>
                </div>

                <button class="btn-checkout">CHECKOUT</button>
            </aside>
        </div>

    </div>

{% endblock %}
{% block java %}
    {#    <script src="{{ url_for('static',filename='js/carts.js') }}"></script>#}
{% endblock %}


{#<head>#}
{#  <meta charset="UTF-8">#}
{#  <meta name="viewport" content="width=device-width, initial-scale=1.0">#}
{#  <title>Cart Summary Aside</title>#}
{#</head>#}
{#<body>#}
{##}
{#<div class="cart-container">#}
{#  <div class="cart-products" id="cartProducts">#}
{#    <h2>Shopping Cart</h2>#}
{#    <!-- Example Product Rows -->#}
{#    <div class="cart-row" data-price="44">#}
{#      <span>Example Product 1</span>#}
{#      <div class="quantity-controls">#}
{#        <button class="decrease">-</button>#}
{#        <span class="quantity">1</span>#}
{#        <button class="increase">+</button>#}
{#      </div>#}
{#      <span class="subtotal">€44.00</span>#}
{#      <button class="remove-btn">Remove</button>#}
{#    </div>#}
{#    <div class="cart-row" data-price="44">#}
{#      <span>Example Product 2</span>#}
{#      <div class="quantity-controls">#}
{#        <button class="decrease">-</button>#}
{#        <span class="quantity">1</span>#}
{#        <button class="increase">+</button>#}
{#      </div>#}
{#      <span class="subtotal">€44.00</span>#}
{#      <button class="remove-btn">Remove</button>#}
{#    </div>#}
{#    <div class="cart-row" data-price="44">#}
{#      <span>Example Product 3</span>#}
{#      <div class="quantity-controls">#}
{#        <button class="decrease">-</button>#}
{#        <span class="quantity">1</span>#}
{#        <button class="increase">+</button>#}
{#      </div>#}
{#      <span class="subtotal">€44.00</span>#}
{#      <button class="remove-btn">Remove</button>#}
{#    </div>#}
{#  </div>#}
{##}
{#  <aside class="cart-summary">#}
{#    <h2>Summary</h2>#}
{#    <div class="line">#}
{#      <span>ITEMS <span id="itemCount">3</span></span>#}
{#      <span id="itemsTotal">€132.00</span>#}
{#    </div>#}
{##}
{#    <div>#}
{#      <span>SHIPPING</span>#}
{#      <select id="shipping">#}
{#        <option value="5">Standard Delivery - €5.00</option>#}
{#        <option value="10">Express Delivery - €10.00</option>#}
{#      </select>#}
{#    </div>#}
{##}
{#    <div>#}
{#      <span>GIVE CODE</span>#}
{#      <input type="text" id="discount" placeholder="Enter your code">#}
{#    </div>#}
{##}
{#    <hr>#}
{##}
{#    <div class="line">#}
{#      <strong>TOTAL PRICE</strong>#}
{#      <strong id="total">€137.00</strong>#}
{#    </div>#}
{##}
{#    <button class="btn-checkout">CHECKOUT</button>#}
{#  </aside>#}
{#</div>#}
{##}
{#<script>#}
{#  const cartProducts = document.getElementById('cartProducts');#}
{#  const shippingSelect = document.getElementById('shipping');#}
{#  const itemCountEl = document.getElementById('itemCount');#}
{#  const itemsTotalEl = document.getElementById('itemsTotal');#}
{#  const totalEl = document.getElementById('total');#}
{##}
{#  function updateSummary() {#}
{#    let itemCount = 0;#}
{#    let itemsTotal = 0;#}
{##}
{#    document.querySelectorAll('.cart-row').forEach(row => {#}
{#      const qty = parseInt(row.querySelector('.quantity').textContent);#}
{#      const price = parseFloat(row.getAttribute('data-price'));#}
{#      itemCount += qty;#}
{#      itemsTotal += qty * price;#}
{#      row.querySelector('.subtotal').textContent = `€${(qty * price).toFixed(2)}`;#}
{#    });#}
{##}
{#    const shipping = parseInt(shippingSelect.value);#}
{#    itemCountEl.textContent = itemCount;#}
{#    itemsTotalEl.textContent = `€${itemsTotal.toFixed(2)}`;#}
{#    totalEl.textContent = `€${(itemsTotal + shipping).toFixed(2)}`;#}
{#  }#}
{##}
{#  cartProducts.addEventListener('click', e => {#}
{#    if (e.target.classList.contains('increase')) {#}
{#      const qtyEl = e.target.parentElement.querySelector('.quantity');#}
{#      qtyEl.textContent = parseInt(qtyEl.textContent) + 1;#}
{#      updateSummary();#}
{#    }#}
{#    if (e.target.classList.contains('decrease')) {#}
{#      const qtyEl = e.target.parentElement.querySelector('.quantity');#}
{#      let qty = parseInt(qtyEl.textContent);#}
{#      if (qty > 1) {#}
{#        qtyEl.textContent = qty - 1;#}
{#        updateSummary();#}
{#      }#}
{#    }#}
{#    if (e.target.classList.contains('remove-btn')) {#}
{#      e.target.parentElement.remove();#}
{#      updateSummary();#}
{#    }#}
{#  });#}
{##}
{#  shippingSelect.addEventListener('change', updateSummary);#}
{#  updateSummary();#}
{#</script>#}
{##}
{#</body>#}
{#</html>#}
